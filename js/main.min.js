function updateDateTime(){var e=new Date,t=e.toLocaleDateString("ar-EG",{day:"numeric",month:"long",year:"numeric"}),e=e.toLocaleTimeString("ar-EG",{hour:"numeric",minute:"2-digit"}),n=document.getElementById("date-time"),o=document.getElementById("time");n&&(n.textContent=t),o&&(o.textContent=e)}function fetchWeather(){fetch("https://wttr.in/?format=%C&lang=ar").then(e=>e.text()).then(e=>{var t=document.getElementById("weather-status"),n=document.getElementById("weather-icon");t&&(t.textContent=e),n&&(e.includes("غائم")?n.src="https://openweathermap.org/img/wn/03d.png":e.includes("مشمس")?n.src="https://openweathermap.org/img/wn/01d.png":e.includes("أمطار")?n.src="https://openweathermap.org/img/wn/09d.png":n.src="https://openweathermap.org/img/wn/50d.png")}).catch(e=>console.error("Weather fetch error:",e))}function getCity(){fetch("https://api.bigdatacloud.net/data/reverse-geocode-client?localityLanguage=ar").then(e=>e.json()).then(e=>{var t=document.getElementById("location");t&&(t.textContent=e.city||e.locality||"غير معروف")}).catch(e=>console.error("City fetch error:",e))}function initWeatherWidget(){fetchWeather(),updateDateTime(),setInterval(updateDateTime,6e4)}function updateYear(){let t=(new Date).getFullYear();document.querySelectorAll(".year").forEach(e=>{e.textContent=t})}function initFeedbackComponent(){var r=document.getElementById("feedbackForm");if(r){let e=new bootstrap.Collapse("#feedback",{toggle:!1}),t=document.getElementById("positiveFeedback");var i=document.getElementById("positiveFeedbackBtn"),s=document.getElementById("negativeFeedbackBtn");let n=document.getElementById("closeFeedbackBtn"),o=document.querySelectorAll(".reason-checkbox"),c=document.querySelector(".reason-checkbox")?.closest("div")?.parentElement.querySelector(".invalid-feedback"),a=document.querySelectorAll('input[name="gender"]'),d=a[0]?.closest("div")?.parentElement.parentElement.parentElement.querySelector(".invalid-feedback");i?.addEventListener("click",function(){e.hide(),t.classList.remove("d-none"),n.classList.add("d-none"),console.log("Positive feedback submitted")}),s?.addEventListener("click",function(){e.show(),t.classList.add("d-none"),n.classList.remove("d-none")}),n?.addEventListener("click",function(){e.hide(),t.classList.remove("d-none"),n.classList.add("d-none")}),r.addEventListener("submit",function(e){(()=>{let e=!0;return[...o].some(e=>e.checked)?c?.classList.remove("d-block"):(c?.classList.add("d-block"),e=!1),[...a].some(e=>e.checked)?d?.classList.remove("d-block"):(d?.classList.add("d-block"),e=!1),e})()?console.log("Form submitted successfully"):(e.preventDefault(),e.stopPropagation())}),o.forEach(e=>e.addEventListener("change",()=>{[...o].some(e=>e.checked)&&c?.classList.remove("d-block")})),a.forEach(e=>e.addEventListener("change",()=>{[...a].some(e=>e.checked)&&d?.classList.remove("d-block")}))}}document.addEventListener("DOMContentLoaded",()=>{initWeatherWidget(),getCity(),updateYear(),initFeedbackComponent()});